<link rel="import" href="../polymer/polymer.html">

<link rel="import" href="../paper-input/paper-input.html">
<link rel="import" href="../paper-button/paper-button.html">

<link rel="import" href="../jongeneel-data/jongeneel-data-products-search.html">
<link rel="import" href="../jongeneel-list-products.html">
<link rel="import" href="../jongeneel-context/jongeneel-context-search.html">

<dom-module id="jongeneel-page-products">

  <style>

    .search {
      display: flex;
      flex-direction: row;
      margin: 0 16px;
      margin-bottom: 20px;
    }

    .search paper-input {
      flex-grow: 1;
    }

  </style>
  <template>

    <div class="search">
      <paper-input id="searchBox"></paper-input>
      <paper-button on-tap="search">Search</paper-button>
    </div>

    <jongeneel-context-search q="{{q}}"></jongeneel-context-search>
    <jongeneel-data-products-search q="[[q]]" data="{{data}}" count="{{count}}"></jongeneel-data-products-search>
    <jongeneel-list-products products="[[data]]" count="[[count]]"></jongeneel-list-products>

  </template>

  <script>
    Polymer({
      is: 'jongeneel-page-products',

      ready: function(e){
        this.$.searchBox.value = this.q
      },

      search: function(e){
        const value = this.$.searchBox.value;
        this.set('q', value)
      }

    });
  </script>

</dom-module>